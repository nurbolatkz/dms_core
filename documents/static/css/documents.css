/* Apply Inter font globally */
body {
    font-family: 'Inter', sans-serif;
    margin: 0;
    min-height: 100vh; /* Ensures body takes full viewport height */
    background-color: #f3f4f6;
    overflow-x: hidden; /* Prevent horizontal scrollbar on body */
    /* CRITICAL FIX: Body itself does not need display:flex here.
       We manage layout with fixed sidebar and margin on content-wrapper. */
}

/* Header Styles */
header {
    background-color: white;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    padding: 1rem; /* p-4 */
    display: flex;
    align-items: center;
    justify-content: space-between;
    z-index: 40;

    /* Mobile specific: fixed at top of viewport */
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    width: 100%;
    border-radius: 0;
}

@media (min-width: 768px) { /* Desktop header styles */
    header {
        position: sticky; /* CRITICAL FIX: Make header sticky within its scrollable parent */
        top: 0; /* Stick to the top of the scrollable parent */
        z-index: 20; /* Ensure it's above table content when scrolling */
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); /* Keep shadow for sticky effect */
        border-top-right-radius: 0.5rem;
        border-bottom-left-radius: 0;
        border-bottom-right-radius: 0;
    }
}

/* Header Navigation items */
header .flex.items-center.space-x-2 a span {
    display: none; /* Hide text on mobile */
}
header .flex.items-center.space-x-2 a i {
    margin-right: 0; /* Remove margin next to icon when text is hidden */
}

@media (min-width: 768px) { /* Desktop header navigation items */
    header .flex.items-center.space-x-6 a span {
        display: inline; /* Show text labels on desktop */
    }
    header .flex.items-center.space-x-6 a i {
        margin-right: 0.5rem;
    }
    header .flex.items-center.ml-2.md\:ml-4 {
        margin-left: 1rem;
    }
}

/* User avatar and info in header */
header .flex.items-center.ml-2.md\:ml-4 .hidden.md\:block {
    display: none;
}
@media (min-width: 768px) {
    header .flex.items-center.ml-2.md\:ml-4 .hidden.md\:block {
        display: block;
    }
}


/* Sidebar Overlay (for mobile) */
#sidebar-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    z-index: 30;
    display: none;
}
#sidebar-overlay.open {
    display: block;
}


/* Sidebar Styles */
#sidebar {
    background-image: linear-gradient(to bottom right, #111827, #1f2937);
    color: white;
    padding: 1rem;
    display: flex;
    flex-direction: column;
    width: 16rem; /* Tailwind w-64 */
    transition: transform 0.3s ease-in-out;
    z-index: 40;

    /* Mobile: initially hidden, fixed to screen edge */
    position: fixed;
    top: 0;
    left: 0;
    height: 100vh;
    transform: translateX(-100%);
    
    /* Rounded corners as per image: no rounding on left, rounded on right */
    border-top-left-radius: 0;
    border-bottom-left-radius: 0;
    border-top-right-radius: 0.5rem;
    border-bottom-right-radius: 0.5rem;
    box-shadow: 2px 0 5px rgba(0, 0, 0, 0.1); /* Shadow to the right, as per image */
}

#sidebar.open {
    transform: translateX(0);
}

@media (min-width: 768px) { /* Desktop Sidebar styles */
    #sidebar {
        transform: translateX(0); /* Always visible on desktop */
        position: fixed; /* CRITICAL FIX: Keep sidebar fixed on desktop */
        top: 0; /* Stick to the top */
        left: 0; /* Stick to the left */
        flex-shrink: 0; /* Prevent it from shrinking */
        height: 100vh; /* Make it fill full viewport height on desktop */
    }
}

/* Main Content Area Wrapper (contains header and main content) */
/* This div needs to take the remaining space next to the fixed sidebar on desktop */
#content-wrapper { /* Target by ID for specificity */
    flex-grow: 1; /* Takes remaining horizontal space on desktop */
    width: 100%; /* Default to full width on mobile */
    display: flex; /* Make it a flex container for its children (header, main) */
    flex-direction: column; /* Stack header and main content vertically */
    min-height: 100vh; /* Ensure it takes full height */
    
    /* On mobile, content starts below the fixed header */
    margin-top: 4rem; /* Compensate for header height */
    
    /* --- CRITICAL FIX: Add margin-left to push content away from fixed sidebar on desktop --- */
    margin-left: 0; /* Default no margin on mobile */
    
    /* --- CRITICAL FIX: Make this the scrollable container on desktop --- */
    overflow-y: auto; /* Enable vertical scrolling for this container */
    overflow-x: hidden; /* Hide horizontal overflow unless needed for table */
}

@media (min-width: 768px) { /* Desktop styles for content wrapper */
    #content-wrapper {
        margin-top: 0; /* No top margin needed on desktop */
        margin-left: 16rem; /* Push content right by sidebar width (16rem) */
        width: calc(100% - 16rem); /* Explicitly set width to prevent overflow issues */
    }
}

/* Main Content Area (inside the wrapper) */
#main-content {
    flex-grow: 1; /* Takes remaining vertical space within its column */
    padding: 1rem;
    background-color: #f3f4f6;
    border-radius: 0.5rem; /* Apply rounded corners to the main content area */
    
    /* Ensure content inside doesn't cause overflow */
    min-width: 0; /* Allow flex item to shrink below its content size */
}

/* Specific fixes for table and title overflow */
#main-content h1 {
    word-break: break-word; /* Break long words */
    overflow-wrap: break-word; /* Standard for wrapping */
    min-width: 0; /* Allow it to shrink within flex container */
}

/* --- CRITICAL FIXES FOR TABLE LAYOUT AND TEXT WRAPPING FOR ALL COLUMNS --- */
table {
    table-layout: fixed; /* CRITICAL: Columns respect set widths or distribute evenly */
    width: 100%; /* Ensure table takes full width of its container */
    /* Optional: Set a minimum width for the table if it looks too squished on smaller screens before horizontal scroll kicks in */
    /* min-width: 700px; */ 
}

th, td {
    white-space: normal; /* CRITICAL: Allow text to wrap naturally */
    word-wrap: break-word; /* For older browsers */
    overflow-wrap: break-word; /* Standard for breaking long words */
    vertical-align: top; /* Align content to the top of the cell */
    padding: 0.75rem 1.25rem; /* Adjust padding as needed */
    /* Add overflow hidden and text-overflow ellipsis for cells if you prefer truncation over wrapping */
    /* overflow: hidden; */
    /* text-overflow: ellipsis; */
}

/* Specific column widths (adjust as needed for your content) */
/* These widths are percentages of the table's total width */
/* Ensure the sum of widths is 100% or slightly less to allow for gaps/borders */
.min-w-full th:nth-child(1), .min-w-full td:nth-child(1) { /* Заголовок (Title + Date/Number) */
    width: 25%; /* Adjusted from 25% to allow more space for other columns */
}
.min-w-full th:nth-child(2), .min-w-full td:nth-child(2) { /* Контрагент */
    width: 25%;
    white-space: normal; /* CRITICAL: Allow text to wrap naturally */
    word-wrap: break-word; /* For older browsers */
    overflow-wrap: break-word; 
}
.min-w-full th:nth-child(3), .min-w-full td:nth-child(3) { /* Статус */
    width: 10%;
}
.min-w-full th:nth-child(4), .min-w-full td:nth-child(4) { /* Автор */
    width: 15%;
}
.min-w-full th:nth-child(5), .min-w-full td:nth-child(5) { /* Тип */
    width: 15%;
    white-space: normal; /* CRITICAL: Allow text to wrap naturally */
    word-wrap: break-word; /* For older browsers */
    overflow-wrap: break-word; 
}
.min-w-full th:nth-child(6), .min-w-full td:nth-child(6) { /* Действия */
    width: 10%;
}

/* Ensure the overflow-x-auto container works properly */
/* Your HTML already has this class on the div wrapping the table.
   We just need to make sure it functions as expected. */
.overflow-x-auto {
    /* This ensures the scrollbar appears only for the table if it exceeds its parent's width */
    overflow-x: auto;
    -webkit-overflow-scrolling: touch; /* Smooth scrolling on iOS */
    /* Ensure this container can shrink if content is too wide */
    width: 100%;
    min-width: 0; /* Allow flex item to shrink */
}


/* Status badge styles (kept as is) */
.status-badge {
    padding: 0.25rem 0.75rem;
    display: inline-flex;
    font-size: 0.75rem;
    line-height: 1.25rem;
    font-weight: 600;
    border-radius: 9999px;
}
/* Подготовлен (Prepared) - Gray */
.status-badge.prepared { background-color: #e5e7eb; color: #4b5563; }
/* На согласовании (On Approval) - Yellow */
.status-badge.on_approval { background-color: #fef3c7; color: #b45309; }
/* Утвержден (Approved) - Green */
.status-badge.approved { background-color: #d1fae5; color: #065f46; }
/* Ожидает (Pending) - Orange */
.status-badge.pending { background-color: #ffedd5; color: #c2410c; }
/* Подписан (Signed) - Blue */
.status-badge.signed { background-color: #dbeafe; color: #2563eb; }
/* Отклонен (Rejected) - Red */
.status-badge.rejected { background-color: #fee2e2; color: #991b1b; }
/* Default/Fallback */
.status-badge.default { background-color: #e5e7eb; color: #4b5563; }


/* Custom Modal Styling (kept as is) */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
}

.modal-content {
    background-color: white;
    padding: 1.5rem;
    border-radius: 0.75rem;
    box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
    max-width: 90%;
    max-height: 90%;
    overflow-y: auto;
    position: relative;
    width: 100%;
}

.modal-close-button {
    position: absolute;
    top: 0.75rem;
    right: 0.75rem;
    background: none;
    border: none;
    font-size: 1.5rem;
    cursor: pointer;
    color: #4a5568;
}

/* Improved mobile table styles (kept as is) */
@media (max-width: 767px) {
    .table-header {
        display: none;
    }
    
    .mobile-document-item {
        display: block;
        padding: 1rem;
        border-bottom: 1px solid #e5e7eb;
    }
    
    .mobile-document-item:last-child {
        border-bottom: none;
    }
    
    .mobile-doc-title {
        font-weight: 600;
        margin-bottom: 0.5rem;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
        text-overflow: ellipsis;
    }
    
    .mobile-doc-meta {
        display: flex;
        justify-content: space-between;
        font-size: 0.875rem;
        color: #6b7280;
        margin-bottom: 0.5rem;
    }
    
    .mobile-doc-actions {
        display: flex;
        justify-content: flex-end;
    }
}

/* Custom toggle switch styles for Форма Оплаты (kept as is) */
.toggle-switch {
    position: relative;
    display: inline-block;
    width: 80px;
    height: 34px;
}

.toggle-switch input {
    opacity: 0;
    width: 0;
    height: 0;
}

.toggle-slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: #ccc;
    -webkit-transition: .4s;
    transition: .4s;
    border-radius: 34px;
}

.toggle-slider:before {
    position: absolute;
    content: "";
    height: 26px;
    width: 26px;
    left: 4px;
    bottom: 4px;
    background-color: white;
    -webkit-transition: .4s;
    transition: .4s;
    border-radius: 50%;
}

input:checked + .toggle-slider {
    background-color: #2196F3;
}

input:focus + .toggle-slider {
    box-shadow: 0 0 1px #2196F3;
}

input:checked + .toggle-slider:before {
    -webkit-transform: translateX(46px);
    -ms-transform: translateX(46px);
    transform: translateX(46px);
}

.toggle-labels {
    position: absolute;
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: space-between;
    align-items: center;
    color: white;
    font-size: 0.75rem;
    font-weight: 600;
    user-select: none;
}

.toggle-labels span {
    padding: 0 8px;
    transition: color 0.4s;
}

.toggle-labels .cash-label {
    color: #374151;
}
.toggle-labels .bank-label {
    color: white;
}
input:checked ~ .toggle-labels .cash-label {
    color: white;
}
input:checked ~ .toggle-labels .bank-label {
    color: #374151;
}

/* Custom dropdown styles (kept as is) */
.custom-dropdown-container {
    position: relative;
}

.custom-dropdown-suggestions {
    position: absolute;
    z-index: 100;
    width: 100%;
    max-height: 200px;
    overflow-y: auto;
    background-color: white;
    border: 1px solid #d1d5db;
    border-radius: 0.5rem;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    list-style: none;
    padding: 0;
    margin: 0;
}

.custom-dropdown-suggestions li {
    padding: 0.5rem 1rem;
    cursor: pointer;
    transition: background-color 0.15s ease-in-out;
}

.custom-dropdown-suggestions li:hover,
.custom-dropdown-suggestions li.active {
    background-color: #f3f4f6;
}